<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="icia.escape.db.MapMapper">

   <!-- 캠핑 : 캠핑장 지도 리스트 -->
  <select id="getCampingList" parameterType="icia.escape.beans.Camping" resultType="icia.escape.beans.Camping">
      SELECT CPIMAGE, CPNAME, CPNUMBER, HANAME, THNAME, MAADDRESS
      FROM CAMPINGLIST 
      WHERE CPCACODE = #{cpCaCode} AND CPMACFCODE = #{cpMaCfCode}
   </select>
   
   <!-- 캠핑 : 캠핑장 지도 리스트 10개 단위로 쪼개기 -->
   <select id="getCampingRecord" parameterType="icia.escape.beans.Camping" resultType="icia.escape.beans.Camping">
   <![CDATA[
	SELECT ROWNUMBER, CPIMAGE, CPNAME, CPNUMBER, HANAME, THNAME, MAADDRESS FROM(
        
                SELECT ROWNUM AS ROWNUMBER, CPIMAGE, CPNAME, CPNUMBER, HANAME, THNAME, MAADDRESS
                  
                FROM CAMPINGLIST WHERE ROWNUM <= #{pageNumber} * #{amount} AND CPCACODE = #{cpCaCode} AND CPMACFCODE = #{cpMaCfCode}) 
                
    WHERE ROWNUMBER > (#{pageNumber}-1) * #{amount}
    ]]>
   </select>
   
   <!-- 캠핑 : 전체 게시물 수 카운트 -->
   <select id="countCampingList" resultType="int">
   SELECT COUNT(*)
   FROM CAMPINGLIST
   WHERE CPCACODE = #{cpCaCode} AND CPMACFCODE = #{cpMaCfCode}
   </select>
   
</mapper>